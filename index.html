<!DOCTYPE html>
<html lang="en" translate="no">
  <head>
    <meta charset="utf-8" />
    <meta
      http-equiv="Content-Security-Policy"
      content="    
          default-src 'self' ; 
          script-src 'self' 'unsafe-inline'; 
          style-src 'self' 'unsafe-inline'; 
          img-src 'self' *; 
          media-src 'self' ; 
          frame-src 'self';
      "
    />
    <title>h5test-list</title>
    <meta name="description" content="h5test-list" />
    <meta name="renderer" content="webkit" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <style>
      html,
      body,
      div,
      span,
      applet,
      object,
      iframe,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      p,
      blockquote,
      pre,
      a,
      abbr,
      acronym,
      address,
      big,
      cite,
      code,
      del,
      dfn,
      em,
      font,
      img,
      ins,
      kbd,
      q,
      s,
      samp,
      small,
      strike,
      strong,
      sub,
      sup,
      tt,
      var,
      b,
      u,
      i,
      center,
      dl,
      dt,
      dd,
      ol,
      ul,
      li,
      fieldset,
      form,
      label,
      legend,
      table,
      caption,
      tbody,
      tfoot,
      thead,
      tr,
      th,
      td {
        margin: 0;
        padding: 0;
        border: 0;
        outline: 0;
        font-size: 100%;
        vertical-align: baseline;
        background: transparent;
      }
      :root {
        font-size: 14px;
        font-family: -apple-system, BlinkMacSystemFont, "Noto Sans",
          "sans-serif", "Segoe UI", Helvetica, Arial, sans-serif,
          "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      }
      body {
        text-shadow: 0px 1px 0px #fff;
        word-wrap: break-word;
        background-color: #fff;
        -webkit-overflow-scrolling: touch;
        text-align: center;
        font-size: 16px;
        word-spacing: 0px;
        word-break: break-word;
        word-wrap: break-word;
        text-align: left;
        line-height: 1.75;
        color: #595959;
        font-family: Optima-Regular, Optima, PingFangTC-Light, PingFangSC-light,
          PingFangTC-light;
        letter-spacing: 2px;
        background-image: linear-gradient(
            90deg,
            rgba(50, 0, 0, 0.05) 3%,
            rgba(0, 0, 0, 0) 3%
          ),
          linear-gradient(360deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%);
        background-size: 20px 20px;
        background-position: center center;
      }
      a,
      img {
        -webkit-touch-callout: none;
      }
      .main {
        padding: 10px;
        overflow-y: auto;
        display: none;
      }
      .main p {
        font-size: 14px;
      }
      .main p:not(:first-child) {
        margin-top: 15px;
      }
      .main p a {
        text-decoration: none;
        color: #2b2929;
      }
      .main .list:after {
        clear: both;
        display: block;
        visibility: hidden;
        height: 0;
        content: "";
      }
      .main .list li {
        float: left;
        text-decoration: none;
        margin: 5px auto;
        list-style: none;
        padding: 5px;
      }
      .main .list li a {
        text-decoration: none;
        font-size: 14px;
      }
      .main .list li:not(:first-child) {
        margin-left: 10px;
      }
      .main .list li a:hover {
        text-decoration: none;
        color: #191919 !important;
      }

      body {
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
        overflow: hidden;
        height: 100vh;
      }
      .side {
        width: 260px;
        overflow-y: auto;
        /* background-color: #79bbb5; */
        padding: 20px;
      }

      .section {
        padding: 5px 10px;
        font-weight: bold;
      }

      .link {
        padding-left: 20px;
        /* font-size: 14px; */
        opacity: 0.75;
        text-decoration: none;
        cursor: pointer;
      }

      .link:hover {
        color: #2b2929 !important;
        opacity: 0.9;
        text-decoration: underline;
      }

      .link[selected="true"] {
        font-weight: bold;
        text-decoration: underline;
        opacity: 1;
        cursor: pointer;
      }

      .iframe {
        flex-grow: 1;
        background-color: bisque;
      }
    </style>
  </head>

  <body>
    <div class="side">
      <div class="section">glsl</div>
      <div>
        <a class="link" style="color: #79bbb5" href="./glsl/glsl2d.html"
          >glsl2d</a
        >
      </div>
      <div>
        <a class="link" style="color: #79bbb5" href="./glsl/stage.html"
          >stage</a
        >
      </div>
      <div class="section">r3f</div>
    </div>
    <iframe class="iframe" allow="autoplay" src=""></iframe>

    <script>
      document.addEventListener("DOMContentLoaded", main, false);
      async function main() {
        const iframe = document.querySelector(".iframe");
        const links = document.querySelectorAll(".link");

        let loadQuery = location.search.split("src=");
        if (loadQuery[1]) {
          let target = Array.from(links).find(
            (link) => link.pathname == loadQuery[1]
          );
          updateExample({ target });
        } else {
          let target = links[Math.floor(Math.random() * links.length)];
          updateExample({ target });
        }

        links.forEach((link) => {
          link.addEventListener("click", updateExample, false);
        });

        function updateExample(e) {
          if (!e) return;
          let src = e.target.pathname;
          links.forEach((e) => e.setAttribute("selected", "false"));
          e.target.setAttribute("selected", "true");

          if (e.metaKey) {
            window.open(e.target.href, "_blank");
            return;
          }

          iframe.src = src;

          history.pushState(
            null,
            null,
            `${location.origin}${location.pathname}?src=${src}`
          );
          e.preventDefault && e.preventDefault();
        }
      }
    </script>
  </body>
</html>
