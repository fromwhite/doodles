import{s as C}from"./tunnel-rat-4206162a.js";import{$ as S,r as u}from"./@react-spring/core-453e6029.js";const{useEffect:b,useLayoutEffect:P,useRef:k,useInsertionEffect:$}=S,I=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",w=I?P:b,A=$||w,x=e=>{const t=k([e,(...n)=>t[0](...n)]).current;return A(()=>{t[0]=e}),t[1]},K=(e="",t=location.pathname)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",D=(e,t="")=>e[0]==="~"?e.slice(1):t+e,F="popstate",g="pushState",y="replaceState",M="hashchange",E=[F,g,y,M],O=e=>{for(const t of E)addEventListener(t,e);return()=>{for(const t of E)removeEventListener(t,e)}},T=(e,t)=>C.useSyncExternalStore(O,e,t),R=()=>location.pathname,U=({ssrPath:e}={})=>T(R,e?()=>e:R),V=(e,{replace:t=!1}={})=>history[t?y:g](null,"",e),_=(e={})=>[K(e.base,U(e)),x((t,n)=>V(D(t,e.base),n))];if(typeof history<"u")for(const e of[g,y]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),o=new Event(e);return o.arguments=arguments,dispatchEvent(o),n}}function j(e=B){let t={};const n=o=>t[o]||(t[o]=e(o));return(o,r)=>{const{regexp:s,keys:a}=n(o||""),i=s.exec(r);return i?[!0,a.reduce((f,h,c)=>(f[h.name]=i[c+1],f),{})]:[!1,null]}}const v=e=>e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),z=(e,t,n)=>{let o=e?"((?:[^\\/]+?)(?:\\/(?:[^\\/]+?))*)":"([^\\/]+?)";return t&&n&&(o="(?:\\/"+o+")"),o+(t?"?":"")},B=e=>{const t=/:([A-Za-z0-9_]+)([?+*]?)/g;let n=null,o=0,r=[],s="";for(;(n=t.exec(e))!==null;){const[a,i,l]=n,f=l==="+"||l==="*",h=l==="?"||l==="*",c=h&&e[n.index-1]==="/"?1:0,L=e.substring(o,n.index-c);r.push({name:i}),o=t.lastIndex,s+=v(L)+z(f,h,c)}return s+=v(e.substring(o)),{keys:r,regexp:new RegExp("^"+s+"(?:\\/)?$","i")}},H={hook:_,matcher:j(),base:""},Z=u.createContext(H),m=()=>u.useContext(Z),p=e=>e.hook(e),q=()=>p(m()),G=e=>{const t=m(),[n]=p(t);return t.matcher(e,n)},Q=({path:e,match:t,component:n,children:o})=>{const r=G(e),[s,a]=t||r;return s?n?u.createElement(n,{params:a}):typeof o=="function"?o(a):o:null};u.forwardRef((e,t)=>{const n=m(),[,o]=p(n),{to:r,href:s=r,children:a,onClick:i}=e,l=x(c=>{c.ctrlKey||c.metaKey||c.altKey||c.shiftKey||c.button!==0||(i&&i(c),c.defaultPrevented||(c.preventDefault(),o(r||s,e)))}),f={href:s[0]==="~"?s.slice(1):n.base+s,onClick:l,to:null,ref:t},h=u.isValidElement(a)?a:u.createElement("a",e);return u.cloneElement(h,f)});const d=e=>Array.isArray(e)?[].concat(...e.map(t=>t&&t.type===u.Fragment?d(t.props.children):d(t))):[e],W=({children:e,location:t})=>{const n=m(),o=n.matcher,[r]=p(n);for(const s of d(e)){let a=0;if(u.isValidElement(s)&&(a=s.props.path?o(s.props.path,t||r):[!0,{}])[0])return u.cloneElement(s,{match:a})}return null},X=e=>{const{to:t,href:n=t}=e,[,o]=q(),r=x(()=>o(t||n,e));return w(()=>{r()},[]),null};export{Q as R,W as S,X as a,q as u};
